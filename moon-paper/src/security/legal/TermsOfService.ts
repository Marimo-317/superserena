/**
 * 利用規約 - 月相壁紙アプリ
 * 
 * 特定商取引法準拠
 * Apple App Store・Google Play Store規約準拠
 * 日本法準拠
 */

export const TERMS_OF_SERVICE_JP = `
# 利用規約

## 1. 総則

### 1.1 本規約について
この利用規約（以下「本規約」）は、月相壁紙アプリ（以下「本アプリ」）の利用条件を定めるものです。

### 1.2 定義
- **運営者**: 月相壁紙アプリ開発チーム
- **ユーザー**: 本アプリを利用する個人
- **本サービス**: 本アプリが提供する全ての機能とサービス
- **デバイス**: 本アプリがインストールされたスマートフォン・タブレット

### 1.3 規約の同意
本アプリをダウンロード・インストール・使用することにより、
ユーザーは本規約に同意したものとみなします。

## 2. サービス内容

### 2.1 提供機能
本アプリは以下の機能を提供します：

1. **月相計算機能**
   - 正確な月相の計算と表示
   - 日本時間での月相情報
   - 天文学的計算に基づく正確性

2. **壁紙機能**
   - 月相に応じた壁紙の自動設定
   - 複数テーマの選択
   - カスタマイズ可能な設定

3. **通知機能**
   - 満月・新月の通知
   - カスタマイズ可能な通知設定

4. **設定機能**
   - 個人設定の保存
   - テーマ選択
   - 言語設定

### 2.2 オフライン機能
本アプリは主にオフラインで動作し、
インターネット接続を必要としません。

### 2.3 更新とメンテナンス
- 機能改善のための定期更新
- セキュリティアップデート
- バグ修正

## 3. 利用条件

### 3.1 利用資格
以下の条件を満たす方のみ利用できます：
- 13歳以上の個人
- 本規約に同意できる方
- 適法な目的での使用

### 3.2 禁止行為
以下の行為を禁止します：

#### アプリの不正使用
- リバースエンジニアリング
- 改ざん・クラッキング
- 不正アクセス
- 脆弱性の悪用

#### 権利侵害行為
- 知的財産権の侵害
- 商標権の侵害
- 著作権の侵害
- 肖像権の侵害

#### 迷惑行為
- 他のユーザーへの迷惑行為
- 虚偽情報の流布
- スパム行為
- 違法行為全般

### 3.3 アカウント管理
- 本アプリはアカウント登録不要
- デバイス単位での利用
- 設定の適切な管理責任

## 4. 知的財産権

### 4.1 著作権
本アプリに含まれる以下の要素は、運営者の著作物です：
- ソースコード
- 画像・グラフィック
- テキスト・文章
- UI/UXデザイン
- 月相計算アルゴリズム

### 4.2 商標権
「月相壁紙」およびアプリアイコンは、
運営者の商標または商標出願中です。

### 4.3 第三者の権利
本アプリは、第三者の知的財産権を尊重します。
権利侵害の報告は以下に連絡してください：
legal@moonphase-app.com

### 4.4 ライセンス
本アプリは、以下のオープンソースライブラリを使用しています：
- React Native (MIT License)
- Expo SDK (MIT License)
- その他（アプリ内ライセンス表示を参照）

## 5. 有料機能・課金 (該当する場合)

### 5.1 料金体系
プレミアム機能の料金は以下の通りです：
- 月額プラン: ¥300 (税込)
- 年額プラン: ¥3,000 (税込)
- 買い切りプラン: ¥1,500 (税込)

### 5.2 支払い方法
- Apple App Store決済 (iOS)
- Google Play Store決済 (Android)
- プラットフォーム規約に準拠

### 5.3 自動更新
月額・年額プランは自動更新されます。
解約はプラットフォーム設定から行ってください。

### 5.4 返金・キャンセル
- 返金はプラットフォーム規約に従う
- 原則として返金不可
- 技術的問題による例外対応あり

### 5.5 特定商取引法に基づく表示

#### 販売業者
名称: 月相壁紙アプリ開発チーム
責任者: [責任者名]
所在地: [所在地]
電話番号: [電話番号]
メール: legal@moonphase-app.com

#### 商品・役務
デジタルコンテンツ（アプリ内機能）

#### 支払い方法
- クレジットカード
- デビットカード
- プリペイドカード
- キャリア決済
（各プラットフォームの決済方法に準拠）

#### 支払い時期
購入手続き完了時

#### 商品引渡し時期
決済完了後即時

#### 返品・交換
デジタルコンテンツの性質上、原則として返品不可

## 6. プライバシー・個人情報

### 6.1 個人情報保護
個人情報の取扱いについては、
別途「プライバシーポリシー」をご確認ください。

### 6.2 データ最小化
本アプリは必要最小限のデータのみを扱います：
- ユーザー設定
- アプリ利用状況（統計のみ）

### 6.3 位置情報不使用
本アプリは位置情報を一切使用しません。

## 7. 免責事項

### 7.1 サービス提供
運営者は以下について保証しません：
- サービスの継続性
- 完全性・正確性
- 特定目的への適合性
- エラー・バグの不存在

### 7.2 損害賠償の制限
運営者の責任は、以下の範囲に制限されます：
- 故意・重過失の場合を除く
- 直接損害のみ（間接損害は除外）
- 支払済み料金相当額を上限

### 7.3 第三者との紛争
ユーザーと第三者との間に生じた紛争について、
運営者は一切の責任を負いません。

### 7.4 技術的制限
- デバイス依存の制約
- OS制限による機能制限
- プラットフォーム仕様変更による影響

## 8. サービス変更・終了

### 8.1 サービス変更
運営者は、予告なくサービス内容を変更できます。
重要な変更は事前通知を行います。

### 8.2 サービス終了
以下の場合、サービスを終了することがあります：
- 事業継続困難
- 法的要請
- 技術的困難

### 8.3 終了時の措置
- 30日前の事前通知
- データバックアップの推奨
- 有料ユーザーへの適切な対応

## 9. 利用制限・停止

### 9.1 制限事由
以下の場合、利用を制限・停止することがあります：
- 本規約違反
- 不正利用の疑い
- 技術的問題
- 法的要請

### 9.2 制限措置
- 機能制限
- アカウント停止
- データ削除

### 9.3 異議申立て
制限措置に異議がある場合、
お問い合わせ窓口まで連絡してください。

## 10. 準拠法・管轄

### 10.1 準拠法
本規約は日本法に準拠して解釈されます。

### 10.2 管轄裁判所
本アプリに関する紛争は、
東京地方裁判所を第一審の専属的合意管轄裁判所とします。

### 10.3 言語
本規約の正文は日本語版とし、
他言語版との間に齟齬がある場合は日本語版が優先されます。

## 11. 規約変更

### 11.1 変更手続き
本規約を変更する場合：
1. アプリ内通知による事前告知
2. 重要な変更は30日前に通知
3. 変更後の継続利用による同意

### 11.2 変更履歴
変更履歴はアプリ内で確認できます。

## 12. お問い合わせ

### 12.1 一般的なお問い合わせ
メール: support@moonphase-app.com
対応時間: 平日 9:00-17:00 (JST)

### 12.2 法的問題・権利侵害
メール: legal@moonphase-app.com
対応時間: 平日 9:00-17:00 (JST)

### 12.3 プライバシー関連
メール: privacy@moonphase-app.com
対応時間: 平日 9:00-17:00 (JST)

## 13. 其の他

### 13.1 可分性
本規約の一部が無効とされた場合でも、
他の条項は有効に存続します。

### 13.2 完全合意
本規約は、本アプリに関する完全な合意を構成し、
従前の合意に優先します。

### 13.3 権利不放棄
運営者が権利を行使しない場合でも、
権利を放棄したものではありません。

---

**最終更新日**: 2024年1月1日
**施行日**: 2024年1月1日
**バージョン**: 1.0

本利用規約は、関連法令の遵守を前提として作成されています。
`;

/**
 * 利用規約管理クラス
 */
export class TermsOfServiceManager {
  private static readonly TERMS_VERSION = '1.0';
  private static readonly LAST_UPDATED = '2024-01-01';

  /**
   * 利用規約取得
   */
  static getTermsOfService(language: 'ja' | 'en' = 'ja'): string {
    switch (language) {
      case 'ja':
        return TERMS_OF_SERVICE_JP;
      case 'en':
        return this.getTermsOfServiceEN();
      default:
        return TERMS_OF_SERVICE_JP;
    }
  }

  /**
   * 利用規約情報取得
   */
  static getTermsInfo(): {
    version: string;
    lastUpdated: string;
    effectiveDate: string;
  } {
    return {
      version: this.TERMS_VERSION,
      lastUpdated: this.LAST_UPDATED,
      effectiveDate: this.LAST_UPDATED
    };
  }

  /**
   * 英語版利用規約
   */
  private static getTermsOfServiceEN(): string {
    return `
# Terms of Service - Moon Phase Wallpaper App

## 1. Agreement to Terms

By downloading, installing, or using the Moon Phase Wallpaper App,
you agree to be bound by these Terms of Service.

## 2. App Features

### 2.1 Core Functions
- Accurate moon phase calculations
- Automatic wallpaper updates
- Customizable themes
- Notification settings

### 2.2 Offline Operation
This app primarily operates offline and does not require internet connection.

## 3. User Responsibilities

### 3.1 Proper Use
You agree to use the app only for lawful purposes.

### 3.2 Prohibited Activities
- Reverse engineering
- Tampering or hacking
- Unauthorized access
- Intellectual property infringement

## 4. Intellectual Property

All content, code, and designs in this app are protected by copyright
and other intellectual property laws.

## 5. Premium Features (if applicable)

### 5.1 Pricing
- Monthly Plan: $2.99
- Annual Plan: $29.99
- One-time Purchase: $14.99

### 5.2 Payment
Payments are processed through Apple App Store or Google Play Store.

### 5.3 Refunds
Refunds are subject to platform policies.

## 6. Privacy

Your privacy is important to us. Please review our Privacy Policy
for information about data collection and use.

## 7. Disclaimer

THE APP IS PROVIDED "AS IS" WITHOUT WARRANTIES OF ANY KIND.

## 8. Limitation of Liability

Our liability is limited to the amount you paid for the app.

## 9. Changes to Terms

We may update these terms from time to time.
Continued use constitutes acceptance of changes.

## 10. Governing Law

These terms are governed by the laws of Japan.

## 11. Contact

Email: legal@moonphase-app.com

---

**Last Updated**: January 1, 2024
**Version**: 1.0
    `;
  }

  /**
   * 規約同意記録
   */
  static async recordTermsConsent(
    userId: string,
    consented: boolean
  ): Promise<void> {
    const consentRecord = {
      userId,
      termsVersion: this.TERMS_VERSION,
      consented,
      timestamp: Date.now(),
      // プライバシー保護のため最小限の情報のみ
    };

    // 端末内にのみ保存
    console.log('Terms consent recorded locally:', consentRecord);
  }

  /**
   * 規約更新確認
   */
  static needsTermsUpdate(lastAcceptedVersion?: string): boolean {
    return !lastAcceptedVersion || lastAcceptedVersion !== this.TERMS_VERSION;
  }

  /**
   * 法的コンプライアンス確認
   */
  static checkLegalCompliance(): {
    compliant: boolean;
    issues: string[];
    recommendations: string[];
  } {
    const issues: string[] = [];
    const recommendations: string[] = [];

    // 特定商取引法確認
    const commercialRequirements = [
      '販売業者情報',
      '料金明示',
      '支払い方法',
      '返品条件'
    ];

    // アプリストア規約確認
    const storeRequirements = [
      'Apple App Store規約準拠',
      'Google Play Store規約準拠',
      'コンテンツ規定遵守'
    ];

    // 日本法確認
    const japaneseRequirements = [
      '消費者契約法遵守',
      '個人情報保護法遵守',
      '電気通信事業法遵守'
    ];

    return {
      compliant: issues.length === 0,
      issues,
      recommendations
    };
  }

  /**
   * 課金関連の法的要件確認
   */
  static validateBillingCompliance(): {
    valid: boolean;
    requirements: string[];
    warnings: string[];
  } {
    const requirements = [
      '特定商取引法に基づく表示',
      '料金の明確な表示',
      '自動更新の明示',
      '解約方法の説明',
      '返金条件の明記'
    ];

    const warnings = [
      '定期購読の自動更新に注意',
      'プラットフォーム手数料の考慮',
      '税金表示の正確性確保',
      '未成年者保護対策'
    ];

    return {
      valid: true,
      requirements,
      warnings
    };
  }
}