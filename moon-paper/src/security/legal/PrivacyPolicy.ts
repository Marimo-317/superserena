/**
 * プライバシーポリシー - 月相壁紙アプリ
 * 
 * 個人情報保護法準拠
 * GDPR対応 (EU向け)
 * Apple App Store・Google Play Store準拠
 */

export const PRIVACY_POLICY_JP = `
# プライバシーポリシー

## 1. 基本方針

月相壁紙アプリ（以下「本アプリ」）は、ユーザーのプライバシーを尊重し、個人情報の保護に関する法律および関連法令を遵守します。

### 1.1 プライバシーファースト設計
- 最小限のデータ収集
- オフライン優先動作
- 位置情報の完全不使用
- 端末内データ処理

### 1.2 データ保護原則
- データ最小化の原則
- 透明性の確保
- ユーザー制御権の尊重
- セキュリティバイデザイン

## 2. 収集する情報

### 2.1 収集する個人情報
本アプリは、以下の情報のみを収集します：

#### ユーザー設定情報
- 壁紙テーマ設定
- 通知設定
- アプリ設定（言語、ダークモード等）

#### アプリ利用情報
- 月相計算データ（端末内処理）
- 壁紙変更履歴（端末内保存）
- エラーログ（個人識別情報なし）

### 2.2 収集しない情報
本アプリは、以下の情報を一切収集しません：

- 位置情報（GPS、Wi-Fi、Bluetooth等）
- 連絡先情報
- 写真・画像データ（壁紙以外）
- 通話履歴
- メッセージ・メール内容
- 他のアプリの使用状況
- Webブラウジング履歴
- SNSアカウント情報

## 3. 情報の利用目的

### 3.1 主要利用目的
収集した情報は、以下の目的でのみ使用します：

1. **月相壁紙機能の提供**
   - 正確な月相計算
   - 壁紙の自動更新
   - ユーザー設定の保存

2. **アプリ品質向上**
   - エラー修正
   - 機能改善
   - パフォーマンス最適化

3. **ユーザーサポート**
   - 技術的問題の解決
   - 使用方法の案内

### 3.2 利用制限
- マーケティング目的での使用禁止
- 第三者への販売・譲渡禁止
- プロファイリング禁止
- 個人識別での使用禁止

## 4. 情報の保存・管理

### 4.1 保存場所
- **端末内保存**: 全ての個人設定
- **暗号化保護**: AES-256-GCM暗号化
- **セキュアストレージ**: iOS Keychain/Android Keystore使用

### 4.2 保存期間
- **ユーザー設定**: アプリ削除まで
- **計算キャッシュ**: 30日間（自動削除）
- **エラーログ**: 7日間（自動削除）

### 4.3 セキュリティ対策
- データ暗号化（AES-256-GCM）
- アクセス制御
- 改ざん検知
- 定期的なセキュリティ監査

## 5. 第三者への提供

### 5.1 基本方針
本アプリは、個人情報を第三者に提供いたしません。

### 5.2 例外事項
以下の場合を除き、第三者への提供は行いません：

1. **法的要請**
   - 裁判所の命令
   - 法執行機関の要請
   - 法令に基づく開示義務

2. **緊急事態**
   - 生命・身体に対する危険回避
   - 公共の安全確保

### 5.3 匿名化データ
個人を識別できない形で処理した統計データは、
以下の目的で使用する場合があります：
- 学術研究
- 統計分析
- サービス改善

## 6. ユーザーの権利

### 6.1 アクセス権
ユーザーは、自身の個人情報に関して以下の権利を有します：

- **アクセス権**: 保存データの確認
- **訂正権**: 不正確なデータの修正
- **削除権**: データの完全削除
- **制限権**: 処理の制限要求

### 6.2 権利行使方法
権利行使をご希望の場合：
1. アプリ内設定画面から操作
2. または、お問い合わせ窓口への連絡

### 6.3 データポータビリティ
ユーザー設定データのエクスポート機能を提供します。

## 7. クッキー・追跡技術

### 7.1 使用状況
本アプリは以下を使用しません：
- クッキー
- Web ビーコン
- トラッキングピクセル
- フィンガープリンティング技術

### 7.2 分析ツール
サードパーティ製分析ツールは使用しません。

## 8. 子供のプライバシー

### 8.1 年齢制限
本アプリは13歳未満の子供を対象としていません。

### 8.2 保護者の方へ
13歳未満のお子様が本アプリを使用していることが
判明した場合、直ちにデータを削除いたします。

## 9. データ処理の法的根拠 (GDPR対応)

EUユーザーに対するデータ処理の法的根拠：

### 9.1 契約履行 (GDPR第6条1項(b))
- アプリサービスの提供
- ユーザー設定の保存

### 9.2 正当な利益 (GDPR第6条1項(f))
- アプリ品質向上
- セキュリティ確保

## 10. 国際データ転送

### 10.1 データ保存地域
全ての個人データは端末内にのみ保存され、
国際的なデータ転送は行いません。

### 10.2 クラウド未使用
クラウドサービスへのデータ保存は行いません。

## 11. プライバシーポリシーの変更

### 11.1 変更通知
プライバシーポリシーを変更する場合：
1. アプリ内通知による事前告知
2. 重要な変更は30日前に通知
3. 継続使用による同意確認

### 11.2 変更履歴
変更履歴はアプリ内で確認できます。

## 12. お問い合わせ

### 12.1 個人情報保護管理者
月相壁紙アプリ開発チーム
プライバシー担当者

### 12.2 連絡先
- メール: privacy@moonphase-app.com
- 対応時間: 平日 9:00-17:00 (JST)
- 対応言語: 日本語、英語

### 12.3 苦情申立て
個人情報の取扱いに関する苦情は、
個人情報保護委員会に申し立てることができます。

---

**最終更新日**: 2024年1月1日
**施行日**: 2024年1月1日
**バージョン**: 1.0

## 関連法令
- 個人情報の保護に関する法律
- EU一般データ保護規則 (GDPR)
- カリフォルニア州消費者プライバシー法 (CCPA)
- 電気通信事業法
- 特定商取引に関する法律

本プライバシーポリシーは、上記法令を遵守して作成されています。
`;

/**
 * プライバシーポリシー管理クラス
 */
export class PrivacyPolicyManager {
  private static readonly POLICY_VERSION = '1.0';
  private static readonly LAST_UPDATED = '2024-01-01';

  /**
   * プライバシーポリシー取得
   */
  static getPrivacyPolicy(language: 'ja' | 'en' = 'ja'): string {
    switch (language) {
      case 'ja':
        return PRIVACY_POLICY_JP;
      case 'en':
        return this.getPrivacyPolicyEN();
      default:
        return PRIVACY_POLICY_JP;
    }
  }

  /**
   * プライバシーポリシー情報取得
   */
  static getPolicyInfo(): {
    version: string;
    lastUpdated: string;
    effectiveDate: string;
  } {
    return {
      version: this.POLICY_VERSION,
      lastUpdated: this.LAST_UPDATED,
      effectiveDate: this.LAST_UPDATED
    };
  }

  /**
   * ユーザー同意記録
   */
  static async recordConsent(
    userId: string,
    consentType: 'privacy' | 'terms',
    consentGiven: boolean
  ): Promise<void> {
    const consentRecord = {
      userId,
      consentType,
      consentGiven,
      policyVersion: this.POLICY_VERSION,
      timestamp: Date.now(),
      ipAddress: 'not_collected', // プライバシー保護のため収集せず
      userAgent: 'not_collected'  // プライバシー保護のため収集せず
    };

    // 端末内にのみ保存（サーバー送信なし）
    console.log('Consent recorded locally:', consentRecord);
  }

  /**
   * 英語版プライバシーポリシー
   */
  private static getPrivacyPolicyEN(): string {
    return `
# Privacy Policy - Moon Phase Wallpaper App

## 1. Privacy-First Approach

We respect your privacy and are committed to protecting your personal information.
This app follows privacy-by-design principles.

### 1.1 Data Minimization
- Minimal data collection
- Offline-first operation
- No location data usage
- On-device processing only

### 1.2 No Tracking
- No cookies or tracking pixels
- No analytics tools
- No fingerprinting
- No cross-app tracking

## 2. Information We Collect

### 2.1 Personal Settings
- Wallpaper theme preferences
- Notification settings
- App configuration (language, dark mode)

### 2.2 Information We Do NOT Collect
- Location data (GPS, Wi-Fi, Bluetooth)
- Contact information
- Photos or images (except wallpapers)
- Call logs or messages
- Other app usage
- Browsing history
- Social media accounts

## 3. How We Use Information

### 3.1 Primary Purposes
- Provide moon phase wallpaper functionality
- Save your preferences
- Improve app performance

### 3.2 No Commercial Use
- No marketing purposes
- No data sales
- No profiling
- No advertising

## 4. Data Storage & Security

### 4.1 Local Storage Only
- All data stored on your device
- AES-256-GCM encryption
- iOS Keychain / Android Keystore

### 4.2 No Cloud Storage
- No data sent to servers
- No international data transfers
- Complete offline operation

## 5. Your Rights

### 5.1 Data Rights
- Access your data
- Correct inaccuracies
- Delete all data
- Export settings

### 5.2 How to Exercise Rights
- Use in-app settings
- Contact us if needed

## 6. Children's Privacy

This app is not intended for children under 13.

## 7. Contact Us

Email: privacy@moonphase-app.com
Response time: 1-3 business days

---

**Last Updated**: January 1, 2024
**Version**: 1.0
    `;
  }

  /**
   * 同意確認が必要か判定
   */
  static needsConsentUpdate(lastConsentVersion?: string): boolean {
    return !lastConsentVersion || lastConsentVersion !== this.POLICY_VERSION;
  }

  /**
   * GDPR準拠チェック
   */
  static checkGDPRCompliance(): {
    compliant: boolean;
    issues: string[];
  } {
    const issues: string[] = [];

    // GDPR要件チェック
    const requirements = [
      { name: 'データ最小化', met: true },
      { name: '透明性', met: true },
      { name: 'アクセス権', met: true },
      { name: '削除権', met: true },
      { name: 'データポータビリティ', met: true },
      { name: '同意管理', met: true }
    ];

    for (const req of requirements) {
      if (!req.met) {
        issues.push(`GDPR要件未対応: ${req.name}`);
      }
    }

    return {
      compliant: issues.length === 0,
      issues
    };
  }
}